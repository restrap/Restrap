<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <data>
        <template id="product_pricelist_document">
            <t t-call="web.html_container">
                <t t-call="web.external_layout">
                    <t t-set="doc" t-value="docs.with_context(lang=docs.lang)"/>
                    <div class="page" t-if="pricelist_products">
                        <h2 class="text-center">Product Pricelist</h2>

                        <h5 t-if="e_com_categ">
                            Product Category:
                            <b t-esc="e_com_categ.name"/>
                        </h5>
                        <span class="float-right">Date:
                            <b t-esc="current_date"/>
                        </span>
                        <div class="clearfix"/>

                        <table class="table table-sm">
                            <thead>
                                <tr>
                                    <th>Internal Ref.</th>
                                    <th>Barcode</th>
                                    <th class="text-center">Product Name</th>
                                    <th class="text-center">Min. Quantity</th>
                                    <th class="text-center">Price Duration</th>
                                    <th class="text-right">Price</th>
<!--                                    <th class="text-center">On Hand Qty.</th>-->
                                </tr>
                            </thead>
                            <tbody>
                                <t t-foreach="pricelist_products" t-as="pricelist_product">
                                    <tr>
                                        <td>
                                            <t t-esc="pricelist_product['product_id'].default_code"/>
                                        </td>
                                        <td>
                                            <t t-esc="pricelist_product['product_id'].barcode"/>
                                        </td>
                                        <td>
                                            <t t-esc="pricelist_product['product_id'].with_context(display_default_code=False).display_name"/>
                                        </td>
                                        <td class="text-center">
                                            <t t-if="pricelist_product['min_qty']" t-esc="pricelist_product['min_qty']"
                                               t-options='{"widget": "float", "decimal_precision": "Product Unit of Measure"}'/>
                                            <t t-else="">
                                                -
                                            </t>
                                        </td>
                                        <td class="text-center">
                                            <t t-esc="pricelist_product['price_duration']"/>
                                        </td>
                                        <td class="text-right">
                                            <t t-esc="pricelist_product['price']"
                                               t-options='{"widget": "monetary", "display_currency": currency_id}'/>
                                        </td>
<!--                                        <td class="text-center">-->
<!--                                            <t t-if="pricelist_product['show_product_stock']">-->
<!--                                                 <t t-esc="pricelist_product['stock_on_hand']"-->
<!--                                               t-options='{"widget": "float", "decimal_precision": "Product Unit of Measure"}'/>-->
<!--                                            </t>-->
<!--                                            <t t-else="">-->
<!--                                                <t t-if="pricelist_product['stock_on_hand'] > 0">-->
<!--                                                    In Stock-->
<!--                                                </t>-->
<!--                                                <t t-else="">-->
<!--                                                    Out Of Stock-->
<!--                                                </t>-->
<!--                                            </t>-->

<!--                                        </td>-->
                                    </tr>
                                </t>
                            </tbody>
                        </table>
                    </div>
                    <div t-else="">
                        <span>You do not have any products in the pricelist!</span>
                    </div>
                </t>
            </t>
        </template>

        <record id="paperformat_pricelist_print" model="report.paperformat">
            <field name="name">Product Pricelist</field>
            <field name="default" eval="True"/>
            <field name="format">A4</field>
            <field name="page_height">0</field>
            <field name="page_width">0</field>
            <field name="orientation">Landscape</field>
            <field name="margin_top">40</field>
            <field name="margin_bottom">28</field>
            <field name="margin_left">7</field>
            <field name="margin_right">7</field>
            <field name="header_line" eval="False"/>
            <field name="header_spacing">35</field>
            <field name="dpi">90</field>
        </record>


        <record id="product_pricelist_action_report" model="ir.actions.report">
            <field name="name">Pricelist Print Action</field>
            <field name="model">res.partner</field>
            <field name="report_type">qweb-pdf</field>
            <field name="report_name">pricelist_portal_download.product_pricelist_document</field>
            <field name="report_file">pricelist_portal_download.product_pricelist_document</field>
            <field name="print_report_name">'Product Pricelist'</field>
            <field name="binding_type">report</field>
            <field name="paperformat_id" ref="pricelist_portal_download.paperformat_pricelist_print"/>
        </record>

    </data>
</odoo>